# TalkPro 需求清单

## 项目概述

**产品名称**: TalkPro - 工程师的 AI 职业教练
**目标用户**: 后端/全栈工程师
**核心价值**: 通过 AI Agent 模拟真实面试和职场场景，帮助工程师提升职业能力

---

## 功能需求

### 1. 算法面试 Agent (Priority: P0)

#### 1.1 面试流程
- 用户选择难度等级（简单/中等/困难）
- AI 从题库中选择并生成 LeetCode 风格的算法题
- 用户提交解答（支持代码或文字描述思路）
- AI 根据用户回答进行实时追问：
  - 时间复杂度分析
  - 空间复杂度优化建议
  - 边界条件检查
  - 代码质量改进建议
- 面试结束生成详细反馈报告

#### 1.2 评分维度
- 算法思路正确性
- 代码实现质量
- 时间/空间复杂度分析能力
- 边界条件考虑完整性
- 沟通表达的清晰度

#### 1.3 题库管理
- 预置 50+ LeetCode 风格算法题
- 支持按难度、标签（数组、链表、树、图、动态规划等）分类
- 支持根据用户历史表现智能推荐题目

#### 1.4 可选功能
- 代码执行沙箱（运行用户代码验证正确性）
- 代码编辑器集成（语法高亮、自动补全）

---

### 2. 系统设计面试 Agent (Priority: P0)

#### 2.1 面试流程
- 用户选择系统设计场景：
  - 设计微博 Feed 流
  - 设计秒杀系统
  - 设计即时通讯系统
  - 设计短链接服务
  - 设计分布式缓存
  - 等 10+ 经典场景
- AI 以架构师身份进行引导式提问：
  - 明确需求（QPS、数据量、约束条件）
  - 架构设计思路
  - 技术选型理由
  - 边画边说（用户用文字描述架构图）
- AI 对设计方案进行深度挑战：
  - 单点故障处理
  - 容灾备份方案
  - 数据一致性保证
  - 扩展性分析
- 生成系统设计评估报告

#### 2.2 评估维度
- 需求理解准确性
- 架构设计合理性
- 技术选型适配性
- 可扩展性
- 高可用性
- 数据一致性处理
- 成本优化意识

#### 2.3 场景库
- 预置 10+ 经典系统设计场景
- 每个场景包含：
  - 背景描述
  - 核心需求
  - 约束条件
  - 评估要点

---

### 3. AI 职场导师 (Priority: P1)

#### 3.1 模拟场景类型
- **晋升答辩模拟**
  - AI 扮演挑剔的技术总监
  - 挑战项目贡献度
  - 质疑技术深度
  - 考验业务理解

- **技术方案宣讲**
  - AI 扮演多角色（产品经理、测试负责人、其他团队开发）
  - 模拟跨部门评审会
  - 挑战方案可行性
  - 提出兼容性问题

- **线上故障复盘**
  - AI 扮故故障调查组组长
  - 模拟故障分析会
  - 追问根因分析
  - 质疑改进措施有效性

#### 3.2 角色扮演能力
- AI 根据不同场景切换角色和风格
- 支持难度调整（初级/中级/高级挑战者）
- 根据用户表现动态调整追问深度

---

### 4. 个人成长看板 (Priority: P1)

#### 4.1 训练历史
- 展示所有训练记录
  - 日期
  - 类型（算法/系统设计/职场场景）
  - 评分
  - 耗时

#### 4.2 能力雷达图
- 四个维度可视化展示：
  - 算法能力
  - 系统设计
  - 沟通表达
  - 项目经验
- 使用 ECharts 或 Chart.js 实现

#### 4.3 薄弱点分析
- AI 分析用户训练数据
- 识别能力短板
- 提供针对性改进建议

#### 4.4 成长轨迹
- 折线图展示各维度能力变化
- 时间范围选择（周/月/季度/年）

#### 4.5 智能训练计划
- 根据薄弱环节推荐下 3 个训练任务
- 说明推荐理由
- 一键开始推荐训练

---

### 5. 用户管理 (Priority: P0)

#### 5.1 认证授权
- 用户注册/登录
- 邮箱验证
- 密码重置
- 第三方登录（可选：Google/GitHub）

#### 5.2 用户档案
- 基本信息（姓名、工龄、目标岗位）
- 简历上传/编辑
- 目标公司/岗位 JD 管理

---

### 6. 个性化功能 (Priority: P2)

#### 6.1 面试定制
- 根据简历和目标岗位 JD 定制面试题
- AI 分析简历亮点和薄弱点
- 针对性提问项目经验

#### 6.2 难度自适应
- 根据用户历史表现自动调整题目难度
- 保持挑战性但不至于过于困难

---

## 技术需求

### 后端技术栈

#### 核心框架
- **语言**: Python 3.10+
- **Web 框架**: FastAPI
- **异步支持**: asyncio + uvicorn

#### Agent 引擎
- **LLM 接入**:
  - 优先支持: Claude (Anthropic)
  - 兼容: GPT-4, 国产模型（通义千问、文心一言等）
  - 抽象层设计，支持模型切换
- **Agent 类型**:
  - 面试 Agent: 生成题目、实时追问、评估回答
  - 职场 Agent: 角色扮演、场景模拟
  - 评估 Agent: 分析回答、生成反馈报告

#### 数据存储
- **关系型数据库**: PostgreSQL
  - 用户数据
  - 训练记录
  - 题库/场景库
- **向量数据库**: Qdrant 或 Weaviate
  - 题目/场景的语义向量
  - 支持智能推荐

#### 缓存
- **缓存层**: Redis
  - 会话管理
  - 对话上下文缓存
  - 热点数据缓存

#### 消息队列（可选）
- **任务队列**: Celery + Redis
  - 异步任务处理
  - 报告生成

---

### 前端技术栈

#### 核心框架
- **框架**: React 18+
- **语言**: TypeScript
- **构建工具**: Vite
- **状态管理**: Zustand 或 Redux Toolkit
- **路由**: React Router

#### UI 框架
- **样式**: Tailwind CSS
- **组件库**: shadcn/ui 或 Ant Design
- **图标**: Lucide React 或 Heroicons

#### 代码编辑器
- **Monaco Editor**: VS Code 同款编辑器
- - 语法高亮
- - 自动补全
- - 多语言支持

#### 可视化
- **图表库**: ECharts 或 Recharts
- - 雷达图
- - 折线图
- - 柱状图

#### 实时通信
- **WebSocket**: Socket.io Client
- - 与后端实时对话
- - 流式响应（SSE 或 WebSocket）

---

### 基础设施

#### 部署
- **容器化**: Docker
- **编排**: Docker Compose（开发环境）
- **云平台**:
  - 前端: Vercel / Netlify
  - 后端: Railway / Render / AWS

#### 监控与日志
- **日志**: 结构化日志（JSON 格式）
- **错误追踪**: Sentry（可选）
- **性能监控**: 简单的响应时间记录

#### CI/CD
- **GitHub Actions**:
  - 自动测试
  - 自动构建
  - 自动部署（开发环境）

---

## 非功能需求

### 性能
- API 响应时间 < 2s（不含 LLM 调用）
- LLM 流式响应首字延迟 < 1s
- 支持并发用户数 > 100

### 安全
- 密码加密存储（bcrypt）
- JWT Token 认证
- HTTPS 加密传输
- SQL 注入防护
- XSS 攻击防护
- CORS 策略配置

### 可维护性
- 代码风格统一（Python: black, JavaScript: Prettier）
- 单元测试覆盖率 > 70%
- API 文档（OpenAPI/Swagger）
- 代码注释和文档完善

### 可扩展性
- 模块化设计
- Agent 可插拔
- 题库/场景库可动态扩展
- 支持多 LLM 切换

---

## MVP 范围（第 1 版本）

### 必须包含
- ✅ 用户注册/登录
- ✅ 算法面试 Agent（完整流程）
- ✅ 系统设计面试 Agent（完整流程）
- ✅ 基础 Web UI（对话界面）
- ✅ 训练历史记录
- ✅ Claude API 接入

### 暂不包含
- ❌ 代码执行沙箱
- ❌ AI 职业导师（晋升答辩等）
- ❌ 个人成长看板（雷达图等）
- ❌ 第三方登录
- ❌ 多 LLM 支持（仅 Claude）
- ❌ 实时语音对话

---

## 数据模型

### 用户表 (users)
```
- id: UUID (PK)
- email: String (unique)
- password_hash: String
- name: String
- created_at: DateTime
- updated_at: DateTime
```

### 训练记录表 (training_sessions)
```
- id: UUID (PK)
- user_id: UUID (FK)
- type: Enum (algorithm, system_design, workplace)
- difficulty: Enum (easy, medium, hard)
- topic/question: String
- conversation_history: JSONB
- score: JSONB (各维度评分)
- feedback: Text
- created_at: DateTime
```

### 题库表 (questions)
```
- id: UUID (PK)
- type: Enum (algorithm, system_design)
- title: String
- content: Text
- difficulty: Enum (easy, medium, hard)
- tags: Array<String>
- solution: Text
- evaluation_criteria: JSONB
```

### 场景库表 (scenarios)
```
- id: UUID (PK)
- title: String
- description: Text
- role: String (AI 扮演的角色)
- requirements: Text
- constraints: Text
- evaluation_points: JSONB
```

---

## 开发里程碑

### 第 1 个月
- ✅ 项目初始化（前后端框架搭建）
- ✅ 用户认证系统
- ✅ 算法面试 Agent 开发
- ✅ 基础对话 UI
- ✅ 简单的题库（10-20 题）

### 第 2 个月
- ✅ 系统设计面试 Agent 开发
- ✅ 场景库构建（10+ 场景）
- ✅ 训练记录和查询
- ✅ Agent 对话质量优化

### 第 3 个月
- ✅ 个人成长看板
- ✅ 能力可视化
- ✅ 智能推荐算法
- ✅ 性能优化和测试
- ✅ 上线准备

---

## 成功指标

### 产品指标
- 用户完成率 > 60%（开始面试到完成反馈）
- 用户满意度 > 4.0/5.0
- 愿意推荐给朋友 > 50%

### 技术指标
- API 可用性 > 99%
- 平均响应时间 < 3s
- Bug 率 < 5%

---

*需求文档 v1.0 - 2026-01-25*
